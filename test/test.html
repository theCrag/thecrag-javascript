<html>
<head>
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="theCrag.js"></script>
</head>
<style>
.success {
	background: #efe;
}
.failure {
	background: #fee;
}
</style>
<body>
Tests:
<div id="tests"></div>

<script>
function assert(message, expected, actual){
	$('#tests').append('<div class="' + (expected == actual ? 'success': 'failure') +'">'+message+': Expected: '+expected+', Actual: '+actual+'</div>');
}
$(function(){


	assert('1 Always fail', 1, 0);
	assert('2 Always pass', 1, 1);

	var area = theCrag.area('8040888');
	assert('3 Area exists', 1, !!area);
	assert('4 Promise exists', 1, !!area.promise);

	area.promise.fail(assert('5 theCrag API not working', 1, 0));

	area.get(function(node){
		assert('6 Get area', 'Upper Gara Gorge', node.data.name);
	});


	var layabout = theCrag.route('13342327');
	layabout.get(function(node){
		assert('7 Get route', 'Layabout', node.data.name);
	});

	var illusion = layabout.parent();
	assert('8 Route parent is not null', !null, !!illusion);
	illusion.get(function(node){
		assert('9 Get routes parent', 'Illusion Buttress', node.data.name);
	});

	// make an area object

	var world = tC.world();
	assert('10 World exists', false, !world);
	world.get(function(node){
		assert('11 World', 'World', node.data.name);
	});

	// get an areas children

	

	var children = world.children();
	assert('20 Children exists', false, !children);
	children.get(function(nodeset){

		var australia = nodeset.nodes[1];
		assert('21 Australia', 'Australia', australia.data.name);
		australia.parent().get(function(node){
			assert('22 World again', 'World', node.data.name);
		});


	});

	assert('1000 Last test', 1, 1);
});

</script>





</body>
</html>
